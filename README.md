# Domain Filtering Bot
Бот для фильтрации доменов по ключевым словам. Проверяет как название домена так и содержимое сайта (через сервис WebArchive)

Ключевые слова для фильтрации доменов задаются с помощью регулярных выражений. Одна регулярка для поиска ключей в домене, вторая для поиска ключей. Это нужно, чтобы найти домен определенной тематики. Тематики задаются в самом боте.

Контент домена выгружается из archive.org по API. У сервиса довольно сильно ограничено количество запросов в минуту, поэтому отправляя большой объем - набирайтесь терпения. По умолчанию задержка между запросами составляет 6 сек, задать свой интервал `WAYBACK_TIMEOUT` можно в `.env`
Из сервиса скрипт получает последний доступный снимок.

## Подготовка
1. Создать ТГ бота
2. Переименовать файл `.env.example` в `.env`
3. Отредактировать его, вписав свой `BOT_TOKEN` и также прописать ID админов `BOT_ADMINS`
4. Установить `Node.js 20+` и `pnpm` (желательно)
5. В папке с ботом выполнить `pnpm install`

## Запуск
1. Выполнить сборку `pnpm build`
2. Запуск бота осуществляется командой `pnpm start`
3. Перейти в тг бота и выполнить /start
4. Используя меню "Тематики" добавить как минимум одну для использования в дальнейшем
5. Отправить файл с доменами в формате .csv или .xlsx, домен должен быть в первом столбце
6. Далее выбрать необходимые параметры и дождаться завершения обработки


__Бот принимает к обработке файлы не более 20 Мб [ограничение тг](https://core.telegram.org/bots/api#sending-files)__